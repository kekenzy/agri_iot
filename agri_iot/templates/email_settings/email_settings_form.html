{% extends 'base.html' %}
{% load static %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="management-container">
    <div class="page-header">
        <div class="header-content">
            <h1 class="page-title">{{ title }}</h1>
            <p class="page-subtitle">ãƒ¡ãƒ¼ãƒ«é€ä¿¡è¨­å®šã‚’{% if email_setting %}ç·¨é›†{% else %}ä½œæˆ{% endif %}ã—ã¾ã™</p>
        </div>
        <div class="header-actions">
            <a href="{% url 'agri_app:email_settings_list' %}" class="btn-secondary">
                <span class="btn-icon">â†</span>
                æˆ»ã‚‹
            </a>
        </div>
    </div>

    <div class="card">
        <form method="post" class="email-settings-form">
            {% csrf_token %}
            
            <div class="form-section">
                <h2 class="section-title">åŸºæœ¬æƒ…å ±</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">
                            è¨­å®šå <span class="required">*</span>
                        </label>
                        {{ form.name }}
                        {% if form.name.errors %}
                            <div class="error-message">{{ form.name.errors.0 }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">
                            ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š
                        </label>
                        <div class="checkbox-group">
                            {{ form.is_default }}
                            <span class="checkbox-label">ã“ã®è¨­å®šã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«ã™ã‚‹</span>
                        </div>
                        {% if form.is_default.errors %}
                            <div class="error-message">{{ form.is_default.errors.0 }}</div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <div class="form-section">
                <h2 class="section-title">ãƒ¡ãƒ¼ãƒ«é€ä¿¡è¨­å®š</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label class="form-label">
                            ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé€ä¿¡è¨­å®š
                        </label>
                        <div class="checkbox-group">
                            {{ form.default_send_email }}
                            <span class="checkbox-label">æ–°è¦ãŠçŸ¥ã‚‰ã›ä½œæˆæ™‚ã«ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã‚’æœ‰åŠ¹ã«ã™ã‚‹</span>
                        </div>
                        <div class="help-text">
                            <span class="help-icon">ğŸ’¡</span>
                            ã“ã®è¨­å®šã‚’æœ‰åŠ¹ã«ã™ã‚‹ã¨ã€æ–°ã—ã„ãŠçŸ¥ã‚‰ã›ã‚’ä½œæˆã™ã‚‹éš›ã«è‡ªå‹•çš„ã«ãƒ¡ãƒ¼ãƒ«é€ä¿¡ãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã™
                        </div>
                        {% if form.default_send_email.errors %}
                            <div class="error-message">{{ form.default_send_email.errors.0 }}</div>
                        {% endif %}
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">
                            é€ä¿¡è€…å
                        </label>
                        {{ form.email_from_name }}
                        {% if form.email_from_name.errors %}
                            <div class="error-message">{{ form.email_from_name.errors.0 }}</div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <div class="form-section">
                <h2 class="section-title">ãƒ¡ãƒ¼ãƒ«ä»¶åãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</h2>
                <div class="form-group full-width">
                    <label class="form-label">
                        ä»¶åãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ <span class="required">*</span>
                    </label>
                    {{ form.email_template_subject }}
                    <div class="help-text">
                        <span class="help-icon">ğŸ’¡</span>
                        ä½¿ç”¨å¯èƒ½ãªãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼: {title} (ãŠçŸ¥ã‚‰ã›ã‚¿ã‚¤ãƒˆãƒ«), {priority} (å„ªå…ˆåº¦), {date} (ä½œæˆæ—¥)
                    </div>
                    {% if form.email_template_subject.errors %}
                        <div class="error-message">{{ form.email_template_subject.errors.0 }}</div>
                    {% endif %}
                </div>
            </div>

            <div class="form-section">
                <h2 class="section-title">èª¬æ˜</h2>
                <div class="form-group full-width">
                    <label class="form-label">
                        èª¬æ˜
                    </label>
                    {{ form.description }}
                    {% if form.description.errors %}
                        <div class="error-message">{{ form.description.errors.0 }}</div>
                    {% endif %}
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn-primary">
                    <span class="btn-icon">ğŸ’¾</span>
                    {% if email_setting %}æ›´æ–°{% else %}ä½œæˆ{% endif %}
                </button>
                <a href="{% url 'agri_app:email_settings_list' %}" class="btn-secondary">
                    <span class="btn-icon">âŒ</span>
                    ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %} 